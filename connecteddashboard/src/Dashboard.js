import "./dashboard.css";
import { useD3 } from "./hooks/useD3";
import {useEffect, useState, useRef} from 'react';
import * as d3 from 'd3';

function Dashboard() {

    const renderLiquid = (root, data)=>{
    
        const g = root.select("g#washing-liquid");
        
        const bubbles = g.selectAll("g.bubblegroup").data(data, (data,i)=>i);
        
        const bubbleg = bubbles.enter().append("g").attr("class", "bubblegroup").attr("transform", d=>`translate(${d[0]},${d[1]})`)
                        bubbleg.append("circle").attr("r", d=>4.5*d[2]).attr("cx",112).attr("cy",86).attr("class", (d,i)=>i%2==0? "bubble":"bubble2");
                        bubbleg.append("path").attr("d", d=>`M${111.42-d[2]},${83.659}C${109.216-d[2]},${85.178-d[2]} ${109.115-d[2]},${87.32} ${111.416-d[2]},${88.94}`).attr("class", "bubbleline");
                        
        bubbles.transition().duration(1000).attr("transform", d=>`translate(${d[0]},${d[1]})`)
        bubbles.exit().remove();
    }


    const renderWater = (root, data)=>{
        const g = root.select("g#water-usage");
        const water = g.selectAll("g.watergroup").data(data, (d,i)=>i)
        const waterg = water.enter().append("g").attr("class", "watergroup");

        const rotationfor = (val)=>{
            return `rotate(${Math.min(val, 360)} 52.5 53)`
        }
        waterg.append("path").attr("class","water").attr("id","water").attr("d", "M48.912,64.682C52.473,64.72 55.705,66.84 59.239,66.544C64.685,66.087 74.848,61.512 81.587,61.944C87.478,62.321 90.196,64.977 93.994,66.427L95.147,66.429L95.251,102.694L10.303,102.803L10.027,66.239L10.158,66.216C15.7,65.201 18.91,63.763 24.167,64.009C27.493,64.165 32.153,66.186 36.277,66.298C40.401,66.41 45.085,64.641 48.912,64.682Z")
        waterg.append("circle").attr("id", "gauge-circle").attr("cx", 52).attr("cy", 53).attr("r", 35).attr("class", "gauge-circle");
        waterg.append("path").attr("class","arrow").attr("id","gauge-arrow").attr("d", "M49.138,46.414L49.165,37.721L40.093,39.939L52.678,23.099L65.16,40.015L56.102,37.742L56.075,46.394C58.51,47.633 60.178,50.145 60.178,53.038C60.178,55.948 58.492,58.471 56.034,59.703L55.963,82.978L49.026,82.956L49.098,59.641C46.706,58.387 45.075,55.9 45.075,53.038C45.075,50.16 46.724,47.661 49.138,46.414Z")
        waterg.append("circle").attr("id", "gauge-pivot").attr("cx", 52.5).attr("cy", 53).attr("r", 5).attr("class", "gauge-pivot");
    
        water.select("path.arrow").transition().duration(4000).attrTween("transform", (d)=>{
           
            const to =  rotationfor(d.flow);
            const from = rotationfor(d.previous);
            
            return d3.interpolate(from, to);
        })
        water.exit().remove();
    }

    const renderTime = ()=>{
        return <g id="time">
                <path d="M112.434,102.573L30.213,102.573C28.05,107.697 26.932,113.187 26.935,118.747C26.942,133.772 34.993,147.073 47.277,154.722C46.379,155.24 45.694,155.659 45.433,155.853C45.304,155.948 45.179,156.044 45.057,156.14C34.019,163.966 26.942,176.534 26.935,190.638C26.932,196.248 28.204,201.303 30.405,206.465L112.507,205.984C114.703,200.834 115.708,196.277 115.71,190.682C115.717,176.372 108.445,163.637 97.135,155.826C96.894,155.649 96.64,155.476 96.372,155.306C96.187,155.189 95.836,154.982 95.371,154.718C107.663,147.063 115.718,133.742 115.71,118.703C115.708,113.158 114.591,107.683 112.434,102.573Z" className="timeback"/>
                <rect id="timerect" x="9.711" y="102.577" width="129.587" height="103.717" className="timerect"/>
                <path id="timer" d="M59.727,148.026C47.305,143.561 38.457,132.129 38.451,118.742C38.448,113.246 40.234,107.502 43.117,102.741L98.886,102.912C101.774,107.67 104.192,113.213 104.195,118.709C104.201,132.361 95.012,143.988 82.207,148.271C80.587,150.031 79.645,152.134 79.645,154.393C79.645,157.069 80.968,159.527 83.174,161.454C85.61,162.353 90.4,165.091 90.311,165.11C98.715,170.788 104.2,180.128 104.195,190.677C104.192,196.172 102.671,201.57 99.783,206.328L42.847,206.299C39.964,201.539 38.448,196.139 38.451,190.644C38.456,180.152 43.891,170.862 52.221,165.185C52.008,165.143 56.615,162.583 58.591,161.791C61.037,159.819 62.522,157.228 62.522,154.393C62.522,152.028 61.489,149.833 59.727,148.026Z" className="timer"/>
                <path id="timerreflection" d="M42.335,204.165C41.237,202.05 40.504,199.843 40.061,197.572C39.619,195.312 39.468,192.992 39.529,190.641C39.641,185.871 40.979,181.409 43.237,177.5C45.509,173.569 48.72,170.21 52.582,167.692C52.582,167.692 52.784,167.536 52.784,167.536C53.22,167.297 54.724,166.481 56.159,165.757C57.025,165.32 57.864,164.918 58.412,164.709L59.074,164.346C61.039,163.272 62.412,161.825 63.374,160.149C64.336,158.474 64.872,156.558 65.157,154.539C65.383,152.869 64.874,150.744 63.804,148.888C62.786,147.124 61.272,145.623 59.542,144.924C56.814,143.853 54.263,142.447 51.947,140.78C49.57,139.068 47.443,137.079 45.655,134.838C42.063,130.336 39.817,124.858 39.647,118.736C39.571,116.392 39.752,114.047 40.217,111.758C40.685,109.455 41.434,107.215 42.51,105.093C41.276,107.153 40.359,109.355 39.732,111.642C39.1,113.95 38.77,116.336 38.694,118.737C38.521,125.185 40.559,131.093 44.115,136.008C45.911,138.49 48.098,140.712 50.581,142.618C53.003,144.476 55.717,146.015 58.611,147.223C59.862,147.731 60.909,148.864 61.651,150.136C62.437,151.484 62.896,153.007 62.744,154.225C62.54,155.943 62.136,157.581 61.355,159.02C60.618,160.375 59.552,161.555 58.006,162.452L57.61,162.709C57.023,162.955 56.122,163.418 55.197,163.923C53.718,164.729 52.169,165.637 51.786,165.863C51.722,165.899 51.663,165.942 51.609,165.992L51.491,166.091C47.523,168.916 44.26,172.591 42.043,176.844C39.878,180.998 38.701,185.691 38.812,190.641C38.872,193.03 39.146,195.378 39.711,197.65C40.274,199.911 41.122,202.094 42.335,204.165Z" className="timereflection"/>
                <path id="timerreflection1" d="M100.454,203.825C101.668,201.754 102.516,199.571 103.079,197.31C103.644,195.038 103.918,192.691 103.977,190.301C104.089,185.351 102.912,180.658 100.747,176.504C98.529,172.251 95.267,168.576 91.299,165.751C91.299,165.751 91.181,165.652 91.181,165.652C91.127,165.602 91.067,165.559 91.004,165.523C90.621,165.297 89.072,164.389 87.593,163.583C86.667,163.078 85.767,162.616 85.18,162.369L84.783,162.112C83.238,161.215 82.171,160.035 81.435,158.68C80.653,157.241 80.25,155.603 80.045,153.885C79.894,152.667 80.353,151.144 81.139,149.797C81.88,148.524 82.928,147.391 84.179,146.884C87.073,145.676 89.786,144.137 92.209,142.278C94.692,140.372 96.879,138.15 98.675,135.668C102.231,130.753 104.269,124.845 104.096,118.397C104.02,115.996 103.69,113.61 103.058,111.302C102.431,109.015 101.514,106.813 100.28,104.753C101.356,106.875 102.105,109.116 102.573,111.418C103.037,113.708 103.218,116.052 103.142,118.397C102.972,124.518 100.727,129.996 97.135,134.498C95.347,136.739 93.22,138.728 90.842,140.44C88.527,142.108 85.976,143.513 83.247,144.584C81.518,145.283 80.003,146.785 78.986,148.548C77.916,150.404 77.406,152.529 77.632,154.199C77.917,156.219 78.454,158.134 79.415,159.809C80.378,161.485 81.751,162.932 83.716,164.006L84.378,164.369C84.925,164.578 85.765,164.98 86.63,165.417C88.062,166.139 89.561,166.953 90.002,167.194C90.006,167.196 90.208,167.352 90.208,167.352C94.069,169.87 97.281,173.23 99.552,177.16C101.811,181.069 103.149,185.531 103.261,190.301C103.322,192.652 103.17,194.972 102.729,197.232C102.286,199.503 101.553,201.71 100.454,203.825Z" className="timereflection"/>
                <path id="sandtop" d="M92.814,111.286C94.995,114.593 96.143,118.343 96.143,122.161C96.143,134.165 85.006,143.911 71.289,143.911C57.571,143.911 46.434,134.165 46.434,122.161C46.434,118.343 47.582,114.593 49.764,111.286C63.482,114.353 77.832,114.353 92.814,111.286Z" className="sand"/>
                <path id="sandbottom" d="M95.252,205.616C95.252,205.616 99.02,196.769 99.02,191.983C99.02,176.933 86.417,164.715 70.893,164.715C55.369,164.715 42.765,176.933 42.765,191.983C42.765,196.769 46.534,205.616 46.534,205.616L95.252,205.616Z" className="sand"/>
            </g>
    }

    const renderTechnique =()=>{
        return <g id="technique">
            <rect id="techrect" x="182.598" y="0.483" width="172.594" height="102.667" className="techrect"/>
            <rect x="182.593" y="84.383" width="172.35" height="18.283" className="xback"/>
            <rect x="331.822" y="0.965" width="23.274" height="83.496" className="yback"/>
            <path d="M343.858,12.616C342.473,12.616 341.349,13.74 341.349,15.126L341.349,78.973C341.349,80.358 342.473,81.483 343.858,81.483C345.243,81.483 346.368,80.358 346.368,78.973L346.368,15.126C346.368,13.74 345.243,12.616 343.858,12.616Z" className="axisline"/>
            <path d="M341.631,94.067C341.631,92.682 340.507,91.557 339.122,91.557L189.459,91.557C188.074,91.557 186.949,92.682 186.949,94.067C186.949,95.452 188.074,96.577 189.459,96.577L339.122,96.577C340.507,96.577 341.631,95.452 341.631,94.067Z" className="axisline2"/>
            <path d="M189.98,93.946L338.045,93.946" className="axisline3"/>
            <path d="M344.151,78.896L344.151,14.608" className="axisline4"/>
            <g id="dishmatic">
                <path id="spongetop" d="M302.811,79.838L230.854,79.838L230.854,66.77C230.854,64.365 232.806,62.414 235.21,62.414L299.339,62.414C301.256,62.414 302.811,63.969 302.811,65.886L302.811,79.838Z" className="spongetop"/>
                <path id="spongebottom" d="M230.854,79.838L302.811,79.838L302.811,80.886C302.811,83.519 300.674,85.656 298.041,85.656L235.615,85.656C232.987,85.656 230.854,83.523 230.854,80.896L230.854,79.838Z" className="spongebottom"/>
                <path id="handlebottom" d="M298.269,61.064C298.269,59.781 297.227,58.739 295.944,58.739L239.494,58.739C238.157,58.739 237.071,59.825 237.071,61.163L237.071,62.451L298.269,62.451L298.269,61.064Z" className="handlebottom"/>
                <path id="handle" d="M354.496,0.514L354.496,5.838C343.936,9.43 309.655,27.714 299.032,46.022C296.864,49.759 297.194,59.133 297.194,59.133L238.268,59.35C240.718,46.628 267.419,38.847 286.622,26.745C298.325,19.37 309.604,9.643 321.217,0.514L354.496,0.514Z" className="handle"/>
            </g>
            <g id="yaccsponge">
                <path id="yaccspongetop" d="M246.87,95.28L231.244,95.28L231.244,90.486C231.244,89.604 231.96,88.888 232.842,88.888L245.596,88.888C246.299,88.888 246.87,89.459 246.87,90.162L246.87,95.28Z" className="yaccspongetop"/>
                <path id="yaccspongebottom" d="M231.244,95.28L246.87,95.28L246.87,95.689C246.87,96.714 246.038,97.547 245.012,97.547L233.099,97.547C232.075,97.547 231.244,96.716 231.244,95.693L231.244,95.28Z" className="yaccspongebottom"/>
            </g>
            <g id="xaccsponge">
                <path id="xaccspongebottom" d="M339.894,42.653C337.879,42.653 336.243,44.289 336.243,46.304L336.243,50.357C336.243,52.372 337.879,54.007 339.894,54.007C339.894,54.007 348.413,54.007 348.413,54.007C350.428,54.007 352.063,52.372 352.063,50.357C352.063,50.357 352.063,46.304 352.063,46.304C352.063,44.289 350.428,42.653 348.413,42.653C348.413,42.653 339.894,42.653 339.894,42.653Z" className="xaccspongebottom"/>
                <path id="xaccspongetop" d="M339.894,44.277C338.775,44.277 337.867,45.185 337.867,46.304L337.867,50.357C337.867,51.475 338.775,52.383 339.894,52.383L348.413,52.383C349.531,52.383 350.439,51.475 350.439,50.357L350.439,46.304C350.439,45.185 349.531,44.277 348.413,44.277L339.894,44.277Z" className="xaccspongetop"/>
            </g>
            <g id="pressurelines">
                <path id="pressureline1" d="M228.77,79.263L220.245,71.536L223.859,68.889L228.77,79.263Z"/>
                <path id="pressureline4" d="M307.209,79.335L315.734,71.608L312.12,68.96L307.209,79.335Z"/>
                <path id="pressureline2" d="M228.319,72.356L224.335,64.108L227.769,63.224L228.319,72.356Z"/>
                <path id="pressureline3" d="M305.908,76.391L308.443,69.599L305.664,69.123L305.908,76.391Z"/>
                <path id="pressureline5" d="M310.081,80.345L314.22,76.286L315.458,78.131L310.081,80.345Z"/>
            </g>
        </g>
    }

    const renderNoise = ()=>{
       return <g>
        <rect id="noiserect" x="138.978" y="102.577" width="130.892" height="103.7" className="noiserect"/>
        <path id="bullhorn1" d="M195.156,133.437C192.065,134.672 188.222,136.437 186.878,137.057C186.728,137.126 186.955,137.504 186.906,137.617C186.856,137.729 186.647,137.844 186.58,137.731C186.436,137.487 186.135,136.905 185.823,136.275L185.823,136.276L185.798,136.224L185.799,136.223C185.513,135.58 185.259,134.975 185.162,134.707C185.117,134.583 185.334,134.484 185.45,134.513C185.566,134.542 185.712,134.96 185.858,134.881C187.734,133.854 194.627,130.066 196.705,128.355C197.7,127.535 197.95,125.278 198.325,124.612C198.443,124.403 198.833,124.129 198.959,124.356C199.348,125.06 200.197,126.802 201.048,128.609L201.047,128.61C201.884,130.401 202.67,132.142 202.961,132.887C203.055,133.13 202.607,133.278 202.375,133.245C201.637,133.14 199.77,131.949 198.533,132.253C198.072,132.366 197.467,132.563 196.771,132.816C197.27,133.276 197.696,133.849 198.011,134.52C199.202,137.059 198.346,140.038 196.101,141.168C193.857,142.298 191.067,141.155 189.876,138.616C189.51,137.835 189.424,137.307 189.426,136.51L190.736,135.843C190.631,136.545 190.727,137.299 191.057,138.002C191.875,139.745 193.818,140.516 195.394,139.722C196.971,138.928 197.586,136.869 196.769,135.126C196.408,134.356 195.827,133.776 195.156,133.437Z" className="bullhorn"/>
        <path id="bullhorn2" d="M250.784,118.401C247.779,116.957 243.884,115.319 242.52,114.749C242.367,114.685 242.263,115.117 242.15,115.158C242.038,115.199 241.813,115.123 241.845,114.995C241.915,114.718 242.109,114.089 242.33,113.419L242.329,113.419L242.348,113.365L242.349,113.365C242.597,112.706 242.84,112.095 242.959,111.837C243.014,111.718 243.233,111.81 243.294,111.917C243.354,112.023 243.166,112.423 243.322,112.476C245.338,113.161 252.757,115.666 255.388,116.025C256.649,116.197 258.389,114.815 259.113,114.632C259.34,114.575 259.801,114.675 259.73,114.926C259.512,115.706 258.892,117.549 258.229,119.438L258.229,119.438C257.566,121.306 256.903,123.101 256.588,123.835C256.485,124.074 256.071,123.844 255.933,123.648C255.494,123.025 255.023,120.806 253.952,120.095C253.554,119.831 252.996,119.517 252.337,119.174C252.364,119.865 252.262,120.581 252.015,121.282C251.08,123.933 248.418,125.365 246.074,124.477C243.729,123.59 242.585,120.717 243.52,118.066C243.808,117.25 244.115,116.819 244.67,116.267L246.043,116.78C245.482,117.189 245.026,117.785 244.767,118.519C244.125,120.339 244.94,122.323 246.586,122.946C248.232,123.569 250.09,122.597 250.732,120.777C251.016,119.973 251.015,119.137 250.784,118.401Z" className="bullhorn"/>
        <path id="bullhorn3" d="M243.377,166.5C240.372,165.056 236.477,163.419 235.113,162.848C234.96,162.784 234.856,163.216 234.743,163.257C234.631,163.298 234.406,163.222 234.438,163.094C234.508,162.817 234.702,162.188 234.923,161.519L234.922,161.519L234.941,161.464L234.942,161.464C235.19,160.805 235.433,160.195 235.552,159.936C235.607,159.817 235.827,159.91 235.887,160.016C235.947,160.123 235.759,160.522 235.915,160.575C237.931,161.26 245.35,163.765 247.981,164.124C249.242,164.296 250.982,162.914 251.706,162.731C251.933,162.674 252.394,162.774 252.323,163.026C252.105,163.805 251.485,165.648 250.822,167.538L250.822,167.537C250.159,169.405 249.496,171.2 249.181,171.935C249.078,172.174 248.664,171.943 248.526,171.747C248.087,171.124 247.616,168.905 246.545,168.195C246.147,167.93 245.589,167.616 244.93,167.274C244.957,167.964 244.855,168.68 244.608,169.381C243.673,172.032 241.011,173.464 238.667,172.577C236.322,171.689 235.178,168.816 236.113,166.165C236.401,165.35 236.708,164.919 237.263,164.366L238.636,164.879C238.075,165.288 237.619,165.884 237.36,166.618C236.718,168.438 237.533,170.422 239.179,171.045C240.825,171.668 242.683,170.696 243.325,168.876C243.609,168.072 243.608,167.237 243.377,166.5Z" className="bullhorn"/>
        <path id="bullhorn4" d="M225.763,188.888C222.905,190.623 219.387,193.007 218.157,193.843C218.02,193.937 218.303,194.272 218.271,194.391C218.24,194.51 218.051,194.659 217.968,194.558C217.788,194.341 217.4,193.818 216.995,193.248L216.994,193.248L216.961,193.201L216.963,193.2C216.58,192.614 216.235,192.059 216.098,191.811C216.034,191.696 216.233,191.562 216.352,191.571C216.471,191.58 216.68,191.969 216.811,191.866C218.503,190.54 224.717,185.65 226.501,183.614C227.355,182.638 227.251,180.369 227.518,179.649C227.602,179.423 227.944,179.088 228.103,179.291C228.597,179.921 229.706,181.498 230.827,183.139L230.826,183.14C231.931,184.768 232.977,186.355 233.38,187.042C233.511,187.265 233.092,187.487 232.858,187.493C232.114,187.512 230.085,186.648 228.912,187.155C228.475,187.344 227.908,187.64 227.261,188.006C227.824,188.376 228.334,188.871 228.749,189.48C230.32,191.787 229.939,194.869 227.899,196.36C225.86,197.85 222.929,197.188 221.359,194.881C220.876,194.172 220.708,193.665 220.586,192.878L221.775,192.001C221.781,192.711 221.994,193.439 222.428,194.078C223.507,195.661 225.545,196.098 226.977,195.051C228.409,194.004 228.696,191.869 227.618,190.285C227.142,189.586 226.478,189.11 225.763,188.888Z" className="bullhorn"/>
        <path id="bullhorn5" d="M213.877,153.249C211.592,155.733 208.845,159.03 207.885,160.185C207.778,160.314 208.139,160.555 208.141,160.679C208.142,160.802 208,160.999 207.894,160.926C207.663,160.769 207.15,160.377 206.609,159.945L206.609,159.945L206.565,159.909L206.566,159.908C206.042,159.453 205.563,159.019 205.364,158.819C205.273,158.727 205.428,158.541 205.545,158.516C205.662,158.491 205.967,158.805 206.065,158.668C207.338,156.91 212.01,150.435 213.183,147.968C213.745,146.787 213.041,144.635 213.106,143.867C213.126,143.625 213.366,143.206 213.573,143.355C214.216,143.82 215.701,145.02 217.215,146.277L217.215,146.277C218.71,147.527 220.138,148.754 220.708,149.299C220.894,149.476 220.55,149.809 220.327,149.882C219.616,150.112 217.436,149.862 216.443,150.684C216.073,150.99 215.607,151.437 215.083,151.973C215.723,152.168 216.345,152.498 216.906,152.966C219.029,154.734 219.483,157.806 217.919,159.821C216.356,161.837 213.362,162.037 211.239,160.268C210.586,159.724 210.29,159.285 209.963,158.563L210.873,157.381C211.067,158.062 211.465,158.701 212.053,159.19C213.511,160.405 215.586,160.242 216.684,158.827C217.782,157.412 217.49,155.277 216.032,154.063C215.388,153.526 214.624,153.259 213.877,153.249Z" className="bullhorn"/>
        <path id="bigbull" d="M139.102,165.062C144.458,161.777 149,158.814 151.966,156.549C158.005,151.939 160.313,140.273 162.731,136.703C163.489,135.584 165.836,134.022 166.471,135.132C168.441,138.578 172.648,147.151 176.844,156.054L176.841,156.056C180.962,164.885 184.807,173.478 186.192,177.175C186.643,178.378 184.007,179.326 182.689,179.252C178.486,179.016 168.206,173.688 160.975,175.759C158.282,176.53 154.723,177.792 150.627,179.376C153.315,181.524 155.546,184.285 157.097,187.591C159.81,193.374 159.972,199.821 158.043,205.746L149.459,205.746C151.634,201.124 151.896,195.843 149.721,191.207C147.941,187.414 144.827,184.683 141.096,183.222C140.437,183.496 139.773,183.775 139.102,184.058L139.102,165.062Z" className="bigbull"/>
        <path d="M183.987,177C183.825,177.063 183.654,177.116 183.486,177.157C183.237,177.217 182.994,177.251 182.802,177.239C182.082,177.192 181.17,176.965 180.116,176.66C178.242,176.117 175.955,175.315 173.522,174.627C171.002,173.931 168.341,173.356 165.786,173.228C163.905,173.134 162.081,173.282 160.406,173.77C159.159,174.137 157.73,174.606 156.152,175.166C154.269,175.835 152.172,176.634 149.914,177.531C149.585,177.661 149.301,177.871 149.09,178.139C148.879,178.407 148.733,178.728 148.682,179.077C148.632,179.425 148.673,179.773 148.799,180.089C148.925,180.404 149.129,180.688 149.405,180.905C150.665,181.89 151.82,183.019 152.841,184.288C153.836,185.523 154.707,186.886 155.427,188.374C156.654,190.907 157.352,193.652 157.565,196.425C157.771,199.117 157.525,201.834 156.854,204.411L156.585,204.415C155.276,204.44 152.399,204.495 151.15,204.519C151.842,202.37 152.191,200.082 152.137,197.809C152.078,195.335 151.544,192.881 150.458,190.654C149.47,188.631 148.108,186.997 146.487,185.68C144.858,184.358 142.97,183.357 140.945,182.602C142.933,183.418 144.777,184.474 146.352,185.84C147.898,187.179 149.183,188.818 150.088,190.827C151.076,193.019 151.522,195.414 151.507,197.815C151.492,200.205 151.015,202.601 150.156,204.807C150.107,204.938 150.125,205.084 150.205,205.199C150.285,205.313 150.416,205.381 150.556,205.38C150.556,205.38 154.891,205.428 156.589,205.445C156.878,205.448 157.091,205.449 157.193,205.45C157.602,205.454 157.737,205.138 157.737,205.138C157.746,205.117 157.754,205.096 157.76,205.074C158.617,202.282 158.993,199.305 158.842,196.343C158.693,193.393 158.016,190.462 156.78,187.74C156.045,186.125 155.145,184.64 154.108,183.291C153.036,181.898 151.816,180.653 150.479,179.561C150.446,179.535 150.425,179.498 150.41,179.46C150.396,179.423 150.396,179.382 150.402,179.341C150.409,179.301 150.429,179.267 150.454,179.236C150.478,179.207 150.512,179.187 150.549,179.173C152.801,178.326 154.892,177.575 156.767,176.943C158.317,176.42 159.718,175.978 160.941,175.638C162.419,175.221 164.027,175.123 165.683,175.212C168.098,175.343 170.613,175.881 172.996,176.537C175.433,177.192 177.725,177.969 179.604,178.481C180.818,178.812 181.872,179.034 182.699,179.073C183.046,179.089 183.485,179.038 183.932,178.92C184.304,178.823 184.683,178.684 185.017,178.516L185.66,178.077C185.96,177.834 186.071,177.425 185.933,177.064C185.325,175.53 182.026,168.303 178.252,160.306C172.77,148.689 166.318,135.44 166.261,135.467C166.316,135.444 171.546,147.746 176.395,159.125C177.937,162.743 179.446,166.261 180.728,169.266C182.228,172.784 183.42,175.588 183.987,177Z" className="bigbullinner"/>
    </g>
    }

    const renderTemperature = ()=>{
        return <g id="temperature">
                <rect id="temprect" x="269.71" y="102.577" width="85.422" height="103.7" className="temprect"/>
                <path id="thermometerback" d="M325.38,118.478C325.38,112.103 320.204,106.926 313.828,106.926C307.452,106.926 302.276,112.103 302.276,118.478L302.276,182.13C302.276,188.505 307.452,193.682 313.828,193.682C320.204,193.682 325.38,188.505 325.38,182.13L325.38,118.478Z" className="thermometerback"/>
                <path d="M310.787,192.455C308.665,192.019 306.877,190.564 305.652,188.651C304.513,186.872 303.876,184.698 303.969,182.591C303.969,182.592 304.138,178.731 304.286,172.886C304.323,171.387 304.351,169.759 304.372,168.032C304.391,166.486 304.399,164.86 304.404,163.179C304.415,159.584 304.408,155.734 304.395,151.854C304.382,148.037 304.358,144.192 304.328,140.528C304.267,133.178 304.203,126.565 304.138,122.408C304.094,119.569 304.044,117.878 304.044,117.878C304.044,117.878 304.044,117.877 304.044,117.877C303.959,115.767 304.602,113.617 305.741,111.864C306.964,109.981 308.743,108.553 310.864,108.118C308.63,108.348 306.642,109.647 305.202,111.478C303.791,113.272 302.938,115.574 302.845,117.877C302.845,117.876 302.789,119.567 302.736,122.406C302.657,126.562 302.572,133.175 302.488,140.525C302.446,144.189 302.409,148.034 302.384,151.85C302.358,155.731 302.339,159.581 302.338,163.175C302.338,164.857 302.341,166.482 302.355,168.029C302.37,169.756 302.392,171.384 302.425,172.883C302.554,178.729 302.711,182.59 302.711,182.59C302.711,182.591 302.711,182.591 302.711,182.591C302.812,184.896 303.681,187.22 305.104,189.04C306.555,190.897 308.551,192.226 310.787,192.455Z" className="thermometerreflection"/>
                <path id="thermometerinner" d="M317.83,116.285L317.83,183.334C317.83,185.321 316.037,186.935 313.828,186.935C311.619,186.935 309.826,185.321 309.826,183.334C309.826,183.334 309.826,116.285 309.826,116.285C309.826,114.298 311.619,112.684 313.828,112.684C316.037,112.684 317.83,114.298 317.83,116.285Z" className="thermometerinner"/>
                <path id="thermometerreading" d="M317.83,141.388L317.83,184.614C317.83,185.895 316.037,186.935 313.828,186.935C311.619,186.935 309.826,185.895 309.826,184.614C309.826,184.614 309.826,141.388 309.826,141.388C309.826,140.107 311.619,139.067 313.828,139.067C316.037,139.067 317.83,140.107 317.83,141.388Z" className="thermometerreading"/>
            </g>
    }

    const renderText = ()=>{
       return <g>
                <text x="186.584px" y="8.581px" className="sensortext">technique</text>
                <text x="242.905px" y="201.991px" className="sensortext">noise</text>
                <text x="310.329px" y="201.751px" className="sensortext">temperature</text>
                <text x="99.311px" y="8.498px" className="sensortext">washing liquid used</text>
                <text x="14.645px" y="8.07px" className="sensortext">water usage</text>
                <text x="117.449px" y="201.552px" className="sensortext">time</text>
        </g>
    }

    const [liquiddata, setLiquidData] = useState([Array.from({length: 20}, () => ([-8 + Math.floor(Math.random() * 70),Math.floor(Math.random()*-64), Math.floor(1+Math.random()*2)]))])
    const [waterdata, setWaterData] = useState([{flow:0,fill:0, previous:0}])
    const waterref = useRef(waterdata);

    useEffect(()=>{
        waterref.current = waterdata;
    });
    
    useEffect(()=>{
        setInterval(()=>{
            setLiquidData(Array.from({length: 20}, () => ([-8 + Math.floor(Math.random() * 70),Math.floor(Math.random()*-64), Math.floor(1+Math.random()*2)])));
            setWaterData([{previous: waterref.current[0].flow, flow:Math.floor(Math.random()*100), fill:waterdata.fill + Math.random()*30}])
        },3000);
    },[]);


    const sensorref = useD3((root)=>{

        renderLiquid(root, liquiddata);
        renderWater(root, waterdata);
        {/*<g>
            {renderTime()}
            {renderTechnique()}
            {renderNoise()}
            {renderTemperature()}
            {renderText()}
        </g>*/}
    });

    return (
    <svg ref={sensorref} width="100vw" viewBox="0 0 366 207" className="main">
       <rect x={0} y={0} width="365" height="206" className="backrect"></rect>
       <g id="washing-liquid">
        <rect id="washingrect" x="95.467" y="0.392" width="87.06" height="102.757" className="washingrect"/>
       </g>
       <g id="water-usage">
        <rect id="waterrect" x="9.832" y="0.392" width="85.83" height="102.757" className="waterrect"/>
       </g>
    </svg>);
}

export default Dashboard;