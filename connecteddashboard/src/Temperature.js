import "./dashboard.css";
import { useD3 } from "./hooks/useD3";
import * as d3 from 'd3';

function Temperature(props) {


    const renderTemperature = (root, data)=>{   
        const pos = d3.scaleLinear().domain([10, 60]).range([186,115]);  //reverse range as y is reversed axis
        const temp = d3.scaleLinear().domain([10, 60]).range([0,71]);  
        const mercury = root.selectAll("rect.thermometerreading").data(data, (_,i)=>i);
        mercury.enter().append("rect").attr("x", 311.3).attr("y", d=>pos(d)).attr("width",5).attr("height",d=>temp(d)).attr("rx",2).attr("class", "thermometerreading");
        mercury.transition().duration(1000).attr("y", d=>pos(d)).attr("height",d=>temp(d));       
    }
  
    const temperatureref = useD3((root)=>{
        
        const temperature = props.data;

        renderTemperature(root, [temperature]);
       
    });

    return (<g ref={temperatureref} id="temperature">
                <rect id="temprect" x="269.71" y="102.577" width="85.422" height="103.7" className="temprect"/>
                <path id="thermometerback" d="M325.38,118.478C325.38,112.103 320.204,106.926 313.828,106.926C307.452,106.926 302.276,112.103 302.276,118.478L302.276,182.13C302.276,188.505 307.452,193.682 313.828,193.682C320.204,193.682 325.38,188.505 325.38,182.13L325.38,118.478Z" className="thermometerback"/>
                <path d="M310.787,192.455C308.665,192.019 306.877,190.564 305.652,188.651C304.513,186.872 303.876,184.698 303.969,182.591C303.969,182.592 304.138,178.731 304.286,172.886C304.323,171.387 304.351,169.759 304.372,168.032C304.391,166.486 304.399,164.86 304.404,163.179C304.415,159.584 304.408,155.734 304.395,151.854C304.382,148.037 304.358,144.192 304.328,140.528C304.267,133.178 304.203,126.565 304.138,122.408C304.094,119.569 304.044,117.878 304.044,117.878C304.044,117.878 304.044,117.877 304.044,117.877C303.959,115.767 304.602,113.617 305.741,111.864C306.964,109.981 308.743,108.553 310.864,108.118C308.63,108.348 306.642,109.647 305.202,111.478C303.791,113.272 302.938,115.574 302.845,117.877C302.845,117.876 302.789,119.567 302.736,122.406C302.657,126.562 302.572,133.175 302.488,140.525C302.446,144.189 302.409,148.034 302.384,151.85C302.358,155.731 302.339,159.581 302.338,163.175C302.338,164.857 302.341,166.482 302.355,168.029C302.37,169.756 302.392,171.384 302.425,172.883C302.554,178.729 302.711,182.59 302.711,182.59C302.711,182.591 302.711,182.591 302.711,182.591C302.812,184.896 303.681,187.22 305.104,189.04C306.555,190.897 308.551,192.226 310.787,192.455Z" className="thermometerreflection"/>
                <path id="thermometerinner" d="M317.83,116.285L317.83,183.334C317.83,185.321 316.037,186.935 313.828,186.935C311.619,186.935 309.826,185.321 309.826,183.334C309.826,183.334 309.826,116.285 309.826,116.285C309.826,114.298 311.619,112.684 313.828,112.684C316.037,112.684 317.83,114.298 317.83,116.285Z" className="thermometerinner"/>
                
        </g>
    );
}

export default Temperature;